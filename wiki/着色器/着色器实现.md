
### 着色器编写

* 着色器代码在 `core\shader\*.glsl` 文件中编写，通过工具 `GLSLPacker` 生成对应的 js 代码在程序中读取；

### 程序中使用

* 一次绘制只能使用一个顶点着色器和一个片段着色器，我们希望可以实现多个着色器的组合就需要自己解析着色器代码之后，再将多个着色器拼成一个，再进行渲染；
* `core\src\shader` 包中的代码主要用来实现着色器的解析和拼接；
* 使用前需要调用 `dou3d.ShaderUtil.load();` 来解析所有的着色器代码，这块后面可以放到工具中处理来优化执行效率；

### 宏定义的使用

某些情况下，通过 `uniform` 向着色器中传递数据已经不适用了，比如，我们希望着色器接收多个灯光的信息，但是灯光数量每次渲染时是变化的，这时就可以使用宏定义；

比如下面的shader：

    #define NUM_SPOT_LIGHTS 5

    #if NUM_SPOT_LIGHTS > 0
        uniform float u_spotLights[ 12 * NUM_SPOT_LIGHTS ];
    #endif

    #if NUM_SPOT_LIGHTS > 0
        // 灯光实现代码
    #endif

因为我们每次渲染之前，是已经明确知道当前的灯光数量的，所以在拼接 Shader 的字符串时直接加入宏定义的字符串即可。

**注意：当前引擎没有采用宏定义的这种方式，而是采用了 const 常量的方式，做法上是一致的，但是推荐使用宏定义的方法，可以方便区分代码中的静态数据和动态数据。**
